<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Mailgun用户手册 | 可爱可倾</title><meta name="author" content="可爱可倾"><meta name="copyright" content="可爱可倾"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Mailgun用户手册"><meta name="application-name" content="Mailgun用户手册"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Mailgun用户手册"><meta property="og:url" content="https://blog.keaikeqing.cn/2024/03/03/Web/mailgun/index.html"><meta property="og:site_name" content="可爱可倾"><meta property="og:description" content="Mailgun用户手册 个人信息界面请参考Mailgun面板 仅介绍http接口的使用，不涉及smtp协议。 更多信息请参考官方文档 2. 发送邮件 2.1 发送基本文本  curl -s --user &amp;#39;api:YOUR_API_KEY&amp;#39; \     https:&amp;#x2F;&amp;amp;#x"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://blog.keaikeqing.cn/papercover/Web/Web.webp"><meta property="article:author" content="可爱可倾"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://blog.keaikeqing.cn/papercover/Web/Web.webp"><meta name="description" content="Mailgun用户手册 个人信息界面请参考Mailgun面板 仅介绍http接口的使用，不涉及smtp协议。 更多信息请参考官方文档 2. 发送邮件 2.1 发送基本文本  curl -s --user &amp;#39;api:YOUR_API_KEY&amp;#39; \     https:&amp;#x2F;&amp;amp;#x"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://blog.keaikeqing.cn/2024/03/03/Web/mailgun/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/16.png"/><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 期待下次再见!","backTitle":"♪(^∇^*) 欢迎肥来！"},
  LA51: {"enable":true,"ck":"3KAOg7IT5KO5nuXL","LingQueMonitorID":"3KIpEgdIKLBlVguQ"},
  greetingBox: {"enable":true,"default":"每一天安好","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":22,"endTime":24}]},
  twikooEnvId: 'https://twikoo.keaikeqing.cn',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","📚 热爱学习与探索","🎮 游戏娱乐和创作","🔨 设计开发一条龙","🎨 创意与艺术设计","🌟 追随动漫二次元"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":180,"position":"top","messagePrev":"时光悄然流逝，距离上次更新已有","messageNext":"天，内容可能已经过时，请谨慎参考。"},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":true,"limitCount":50,"languages":{"author":"作者: 可爱可倾","link":"链接: ","source":"来源: 可爱可倾","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '可爱可倾',
  title: 'Mailgun用户手册',
  postAI: '',
  pageFillDescription: 'Mailgun用户手册, 2. 发送邮件, 2.1 发送基本文本, 2.2 以文本和 HTML 版本发送, 2.3 发送附件, 2.4 发送内联文件, 2.5 自定义功能, 2.5.1 仅对特定消息启用跟踪, 2.5.2 特定时间发送, 2.5.3 标记电子邮件, 2.5.5 批量发送, 2.5.6 邮件列表, 3. 追踪消息, 3.1 启用跟踪, 3.2 事件跟踪, 3.3 网络钩子, 3.4 检测机器人, 4. 接收、转发和存储消息, 测试脚本用户手册个人信息界面请参考面板仅介绍接口的使用不涉及协议更多信息请参考官方文档发送邮件发送基本文本以文本和版本发送发送附件发送内联文件自定义功能仅对特定消息启用跟踪虽然可以为仪表板中的所有消息启用跟踪但你也可以有选择地针对每条消息启用跟踪要启用所有跟踪类型请使用参数否则你可以仅启用对打开或点击的特定跟踪特定时间发送选项允许你指定何时发送电子邮件它使用日期格式并且不能超过未来天除非计费计划支持天或更多天的存储能力标记电子邮件重新发送之前发送的电子邮件批量发送支持通过单个调用或会话发送给一组收件人的功能这是通过以下方式实现的通过指定多个收件人电子邮件地址作为参数并使用收件人变量来使用批量发送将邮件列表与模板变量结合使用更多信息请参考批量发送邮件列表邮件列表是使用电子邮件别名向多个收件人发送邮件的好方法当你使用邮件列表时将使用电子邮件别名向每个订阅成员发送邮件副本你可以使用或控制面板创建和维护订阅者列表此外你可以使用模板变量为邮件列表的每个成员创建唯一的消息更多信息请参考邮件列表追踪消息启用跟踪事件跟踪会自动启用但取消订阅打开和点击除外你可以通过控制面板的域选项卡为你的域启用取消订阅跟踪你还可以使用取消订阅变量来管理每条消息的取消订阅你可以在两个级别启用打开和点击跟踪每个发送域和每个消息你可以在特定域设置页面的跟踪设置部分下针对每个域启用打开和点击跟踪发送消息时还可以通过设置和参数来切换跟踪这将覆盖域级别设置你需要将记录指向以便重写链接并跟踪打开情况此外邮件中需要有一个部分以便跟踪打开情况事件跟踪会自动跟踪以下事件接受了发送转发电子邮件的请求并且邮件已放入队列中拒绝了发送转发电子邮件的请求发送了电子邮件并被收件人电子邮件服务器接受无法将电子邮件传送到收件人电子邮件服务器电子邮件收件人打开电子邮件并启用图像查看必须在控制面板中启用开放式跟踪并且记录必须指向电子邮件收件人单击了电子邮件中的链接必须在控制面板中启用点击跟踪并且记录必须指向电子邮件收件人单击取消订阅链接必须在控制面板中启用取消订阅跟踪电子邮件收件人单击其电子邮件客户端中的垃圾邮件投诉按钮反馈循环使能够接收通知已存储传入消息此事件在成功将成员添加到邮件列表后发生如果将成员添加到邮件列表时发生错误甚至会发生这种情况此事件在成功将大量成员上传到邮件列表后发生你可以通过几个接口访问事件我们将数据发布到你的事件你通过获取数据控制面板的日志选项卡网络钩子当你的邮件发生事件时可以向你的发出如果你希望甚至可以发布通知你需要在控制面板的选项卡中提供回调位于域级别它允许你使用域下拉选择器为每个域提供唯一的注意如果要包含端点则必须使用受信任的证书颁发机构签名的证书而不是自签名证书对其进行配置你可以阅读有关下面相应部分中发布的数据的更多信息跟踪打开跟踪点击跟踪退订跟踪垃圾邮件投诉跟踪失败跟踪递送我们建议使用创建临时来测试和调试你的对于会侦听来自服务器的以下代码并做出相应反应如果收到成功代码它将确定成功并且不会重试如果收到不可接受代码将确定被拒绝并且不会重试对于任何其他代码将根据以下的时间表重试送达通知除外如果你的应用程序无法处理请求但你没有返回错误代码将在小时内按以下时间间隔重试送达通知除外然后停止尝试分钟分钟分钟分钟小时小时小时检测机器人使用跟踪像素和重定向来跟踪用户何时打开邮件并单击电子邮件中的链接但是有各种第三方自动化系统会自动打开并发送消息并跟踪链接以进行病毒扫描和用户活动混淆例如由于自动化系统可能会影响打开和点击跟踪的准确性因此将尝试检测其中一个系统何时检索跟踪像素或单击链接当检测到机器人打开或单击电子邮件中的链接时将通过打开单击事件中的字段进行指示字段可以具有以下可能值之一表示机器人表示机器人表示未知机器人很可能是防火墙或防病毒扫描如果机器人字段为空则表示未检测到机器人接收转发和存储消息将允许你通过路由接收电子邮件该路由将执行以下操作将电子邮件转发到不同的电子邮件地址将电子邮件中的数据发布到暂时存储电子邮件以供后续通过请求检索更多信息请参考接收转发和存储消息测试脚本如果有内容添加到中处理附件使用上下文管理器打开文件发送请求并检查错误这将抛出异常如果响应状态码表明一个错误对于所有请求相关的异常无论请求成功还是抛出异常确保所有打开的文件都被关闭如果存在返回发送注册验证码注册验证码你的注册验证码为有效期为分钟请注意如果这不是你本人的操作请忽略并关闭此邮件标签发送邮件模板渲染设置模板环境',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-03 10:00:00',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin><link rel="stylesheet" href="/css/fonts.css" media="print" onload="this.media='all'"><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/rss.xml" title="可爱可倾" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/favicon.ico"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">可爱可倾</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=8265222461&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><span> 关于</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/qrcode-weichat.webp" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/qrcode-weichat.webp"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/qrcode-alipay.webp" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/qrcode-alipay.webp"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">18</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">11</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/" itemprop="url">网站搭建</a></span><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">Mailgun用户手册</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-03-03T02:00:00.000Z" title="发表于 2024-03-03 10:00:00">2024-03-03</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-03-03T02:00:00.000Z" title="更新于 2024-03-03 10:00:00">2024-03-03</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">2.9k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>11分钟</span></span><span class="post-meta-separator"></span><span id="" data-flag-title="Mailgun用户手册"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为天津"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>天津</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2024/03/03/Web/mailgun/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/papercover/Web/Web.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.keaikeqing.cn/2024/03/03/Web/mailgun/"><header><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/" itemprop="url">网站搭建</a><h1 id="CrawlerTitle" itemprop="name headline">Mailgun用户手册</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">可爱可倾</span><time itemprop="dateCreated datePublished" datetime="2024-03-03T02:00:00.000Z" title="发表于 2024-03-03 10:00:00">2024-03-03</time><time itemprop="dateCreated datePublished" datetime="2024-03-03T02:00:00.000Z" title="更新于 2024-03-03 10:00:00">2024-03-03</time></header><h1 id="mailgun用户手册">Mailgun用户手册</h1>
<p>个人信息界面请参考<a
target="_blank" rel="noopener" href="https://app.mailgun.com/mg/dashboard">Mailgun面板</a>
仅介绍http接口的使用，不涉及smtp协议。 更多信息请参考<a
target="_blank" rel="noopener" href="https://documentation.mailgun.com/">官方文档</a></p>
<h2 id="发送邮件">2. 发送邮件</h2>
<h3 id="发送基本文本">2.1 发送基本文本</h3>
<pre class="language-MiME" data-language="MiME"><code class="language-MiME">
curl -s --user &#39;api:YOUR_API_KEY&#39; \
    https:&#x2F;&#x2F;api.mailgun.net&#x2F;v3&#x2F;YOUR_DOMAIN_NAME&#x2F;messages \
    -F from&#x3D;&#39;Excited User &lt;postmaster@YOUR_DOMAIN_NAME&gt;&#39; \
    -F to&#x3D;recipient-1@example.com \
    -F to&#x3D;recipient-2@example.com \
    -F subject&#x3D;&#39;Hello there!&#39; \
    -F text&#x3D;&#39;Testing some Mailgun awesomeness!&#39;</code></pre>
<h3 id="以文本和-html-版本发送">2.2 以文本和 HTML 版本发送</h3>
<pre class="language-MiME" data-language="MiME"><code class="language-MiME">
curl -s --user &#39;api:YOUR_API_KEY&#39; \
    https:&#x2F;&#x2F;api.mailgun.net&#x2F;v3&#x2F;YOUR_DOMAIN_NAME&#x2F;messages \
    -F from&#x3D;&#39;Excited User &lt;postmaster@YOUR_DOMAIN_NAME&gt;&#39; \
    -F to&#x3D;recipient@example.com \
    -F subject&#x3D;&quot;Hello there!&quot; \
    -F text&#x3D;&#39;This will be the text-only version&#39; \
    --form-string html&#x3D;&#39;&lt;html&gt;&lt;body&gt;&lt;p&gt;This is the HTML version&lt;&#x2F;p&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&#39;</code></pre>
<h3 id="发送附件">2.3 发送附件</h3>
<pre class="language-MiME" data-language="MiME"><code class="language-MiME">
curl -s --user &#39;api:YOUR_API_KEY&#39; \
    https:&#x2F;&#x2F;api.mailgun.net&#x2F;v3&#x2F;YOUR_DOMAIN_NAME&#x2F;messages \
    -F from&#x3D;&#39;Excited User &lt;postmaster@YOUR_DOMAIN_NAME&gt;&#39; \
    -F to&#x3D;recipient@example.com \
    -F subject&#x3D;&quot;Hello there!&quot; \
    -F text&#x3D;&#39;Testing some Mailgun awesomeness!&#39; \
    -F attachment&#x3D;@tps-report.txt \
    -F attachment&#x3D;@cover-letter.txt</code></pre>
<h3 id="发送内联文件">2.4 发送内联文件</h3>
<pre class="language-MiME" data-language="MiME"><code class="language-MiME">
curl -s --user &#39;api:YOUR_API_KEY&#39; \
    https:&#x2F;&#x2F;api.mailgun.net&#x2F;v3&#x2F;YOUR_DOMAIN_NAME&#x2F;messages \
    -F from&#x3D;&#39;Excited User &lt;postmaster@YOUR_DOMAIN_NAME&gt;&#39; \
    -F to&#x3D;recipient@example.com \
    -F subject&#x3D;&quot;Hello there!&quot; \
    -F inline&#x3D;@logo.jpg \
    --form-string html&#x3D;&#39;&lt;html&gt;&lt;body&gt;&lt;p&gt;Hello from &lt;img src&#x3D;&quot;cid:email.webp&quot;&#x2F;&gt;&lt;&#x2F;p&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&#39;</code></pre>
<h3 id="自定义功能">2.5 自定义功能</h3>
<h4 id="仅对特定消息启用跟踪">2.5.1 仅对特定消息启用跟踪</h4>
<p>虽然可以为仪表板中的所有消息启用跟踪，但你也可以有选择地针对每条消息启用跟踪。
要启用所有跟踪类型，请使用“o:tracking=“yes””参数。
否则，你可以仅启用对打开（‘o:tracking-opens’）或点击（‘o:tracking-clicks’）的特定跟踪：</p>
<pre class="language-MiME" data-language="MiME"><code class="language-MiME">
curl -s --user &#39;api:YOUR_API_KEY&#39; \
    https:&#x2F;&#x2F;api.mailgun.net&#x2F;v3&#x2F;YOUR_DOMAIN_NAME&#x2F;messages \
    -F from&#x3D;&#39;Excited User &lt;postmaster@YOUR_DOMAIN_NAME&gt;&#39; \
    -F to&#x3D;recipient@example.com \
    -F subject&#x3D;&quot;Hello there!&quot; \
    -F text&#x3D;&#39;Testing some Mailgun awesomeness!&#39; \
    -F o:tracking-opens&#x3D;&quot;yes&quot;</code></pre>
<h4 id="特定时间发送">2.5.2 特定时间发送</h4>
<p>“o:deliverytime”选项允许你指定何时发送电子邮件。 它使用 RFC822
日期格式，并且不能超过未来 3 天（除非计费计划支持 7
天或更多天的存储能力）：</p>
<pre class="language-MiME" data-language="MiME"><code class="language-MiME">
curl -s --user &#39;api:YOUR_API_KEY&#39; \
    https:&#x2F;&#x2F;api.mailgun.net&#x2F;v3&#x2F;YOUR_DOMAIN_NAME&#x2F;messages \
    -F from&#x3D;&#39;Excited User &lt;postmaster@YOUR_DOMAIN_NAME&gt;&#39; \
    -F to&#x3D;recipient@example.com \
    -F subject&#x3D;&quot;Hello there!&quot; \
    -F text&#x3D;&#39;Testing some Mailgun awesomeness!&#39; \
    -F o:deliverytime&#x3D;&#39;Fri, 14 Oct 2011 23:10:10 -0000&#39;</code></pre>
<h4 id="标记电子邮件">2.5.3 标记电子邮件</h4>
<pre class="language-MiME" data-language="MiME"><code class="language-MiME">curl -s --user &#39;api:YOUR_API_KEY&#39; \
    https:&#x2F;&#x2F;api.mailgun.net&#x2F;v3&#x2F;YOUR_DOMAIN_NAME&#x2F;messages \
    -F from&#x3D;&#39;Excited User &lt;postmaster@YOUR_DOMAIN_NAME&gt;&#39; \
    -F to&#x3D;recipient@example.com \
    -F subject&#x3D;&quot;Hello there!&quot; \
    -F text&#x3D;&#39;Testing some Mailgun awesomeness!&#39; \
    -F o:tag&#x3D;&#39;September newsletter&#39; \
    -F o:tag&#x3D;&#39;newsletters&#39;</code></pre>
<h4 id="重新发送之前发送的电子邮件">2.5.4
重新发送之前发送的电子邮件</h4>
<pre class="language-MiME" data-language="MiME"><code class="language-MiME">curl -s --user &#39;api:YOUR_API_KEY&#39; &#123;&#123;STORAGE.URL&#125;&#125; \
    -F to&#x3D;&#39;bob@example.com, john@example.com&#39;</code></pre>
<h4 id="批量发送">2.5.5 批量发送</h4>
<p>Mailgun 支持通过单个 API 调用或 SMTP
会话发送给一组收件人的功能。这是通过以下方式实现的：</p>
<ol type="1">
<li>通过指定多个收件人电子邮件地址作为 to
参数并使用收件人变量来使用批量发送。</li>
<li>将邮件列表与模板变量结合使用</li>
</ol>
<p>更多信息请参考<a
target="_blank" rel="noopener" href="https://documentation.mailgun.com/docs/mailgun/user-manual/sending-messages/#batch-sending">批量发送</a></p>
<h4 id="邮件列表">2.5.6 邮件列表</h4>
<p>邮件列表是使用电子邮件别名向多个收件人发送邮件的好方法。当你使用邮件列表时，Mailgun
将使用电子邮件别名向每个订阅成员发送邮件副本。你可以使用 API
或控制面板创建和维护订阅者列表。此外，你可以使用模板变量为邮件列表的每个成员创建唯一的消息。</p>
<p>更多信息请参考<a
target="_blank" rel="noopener" href="https://documentation.mailgun.com/docs/mailgun/user-manual/sending-messages/#mailing-lists">邮件列表</a></p>
<h2 id="追踪消息">3. 追踪消息</h2>
<h3 id="启用跟踪">3.1 启用跟踪</h3>
<p>事件跟踪会自动启用，但取消订阅、打开和点击除外。</p>
<p>你可以通过控制面板的“域”选项卡为你的域启用取消订阅跟踪。你还可以使用取消订阅变量来管理每条消息的取消订阅。</p>
<p>你可以在两个级别启用打开和点击跟踪 - 每个发送域和每个消息。</p>
<ul>
<li>你可以在特定域设置页面的 “跟踪设置”部分
下针对每个域启用打开和点击跟踪 。</li>
<li>发送消息时，还可以通过设置 o:tracking、o:tracking-clicks 和
o:tracking-opens 参数来切换跟踪。这将覆盖域级别设置。</li>
</ul>
<p>你需要将 CNAME 记录指向 mailgun.org，以便 Mailgun
重写链接并跟踪打开情况。此外，邮件中需要有一个 HTML 部分，以便 Mailgun
跟踪打开情况。</p>
<h3 id="事件跟踪">3.2 事件跟踪</h3>
<p>Mailgun 会自动跟踪以下事件：</p>
<ol type="1">
<li>accepted：Mailgun
接受了发送/转发电子邮件的请求，并且邮件已放入队列中。</li>
<li>rejected：Mailgun 拒绝了发送/转发电子邮件的请求。</li>
<li>delivered：Mailgun
发送了电子邮件，并被收件人电子邮件服务器接受。</li>
<li>failed：Mailgun 无法将电子邮件传送到收件人电子邮件服务器。</li>
<li>opened：电子邮件收件人打开电子邮件并启用图像查看。必须在 Mailgun
控制面板中启用开放式跟踪，并且 CNAME 记录必须指向 mailgun.org。</li>
<li>clicked：电子邮件收件人单击了电子邮件中的链接。必须在 Mailgun
控制面板中启用点击跟踪，并且 CNAME 记录必须指向 mailgun.org。</li>
<li>unsubscribed：电子邮件收件人单击取消订阅链接。必须在 Mailgun
控制面板中启用取消订阅跟踪。</li>
<li>complained：电子邮件收件人单击其电子邮件客户端中的垃圾邮件投诉按钮。反馈循环使
Mailgun 能够接收通知。</li>
<li>stored：Mail 已存储传入消息。</li>
<li>list_member_uploaded：此事件在成功将成员添加到邮件列表后发生。</li>
<li>list_member_upload_error：如果将成员添加到邮件列表时发生错误，甚至会发生这种情况。</li>
<li>list_uploaded：此事件在成功将大量成员上传到邮件列表后发生。</li>
</ol>
<p>你可以通过几个接口访问事件：</p>
<ol type="1">
<li>Webhooks（我们将数据发布到你的 URL）</li>
<li>事件 API（你通过 API 获取数据）</li>
<li>控制面板 (GUI) 的 日志选项 卡</li>
</ol>
<h3 id="网络钩子">3.3 网络钩子</h3>
<p>当你的邮件发生事件时，Mailgun 可以向你的 URL 发出 HTTP/HTTPS
POST。如果你希望 Mailgun
甚至可以发布通知，你需要在控制面板的Webhooks选项卡中提供回调 URL
。Webhook 位于域级别，它允许你使用域下拉选择器为每个域提供唯一的
URL。</p>
<ul>
<li>注意：如果要包含 HTTPS 端点，则必须使用受信任的
CA（证书颁发机构）签名的 SSL 证书（而不是自签名证书）对其进行配置。</li>
</ul>
<p>你可以阅读有关下面相应部分中发布的数据的更多信息（跟踪打开、跟踪点击、跟踪退订、跟踪垃圾邮件投诉、跟踪失败、跟踪递送）。我们建议使用<a
target="_blank" rel="noopener" href="http://bin.mailgun.net/" class="uri">http://bin.mailgun.net/</a>
创建临时 URL 来测试和调试你的 Webhooks。</p>
<p>对于 Webhook POST，Mailgun
会侦听来自服务器的以下代码并做出相应反应：</p>
<ol type="1">
<li>如果 Mailgun 收到 200（成功）代码，它将确定 Webhook POST
成功并且不会重试。</li>
<li>如果 Mailgun 收到 406（不可接受）代码，Mailgun 将确定 POST
被拒绝并且不会重试。</li>
<li>对于任何其他代码，Mailgun 将根据以下 Webhooks 的时间表重试
POSTing（送达通知除外）。</li>
</ol>
<p>如果你的应用程序无法处理 Webhook 请求，但你没有返回 406
错误代码，Mailgun 将在 8
小时内按以下时间间隔重试（送达通知除外），然后停止尝试：5 分钟、10
分钟、15 分钟分钟、1小时、2小时、4小时。</p>
<h3 id="检测机器人">3.4 检测机器人</h3>
<p>Mailgun 使用跟踪像素和 URL
重定向来跟踪用户何时打开邮件并单击电子邮件中的链接。但是，有各种第三方自动化系统会自动打开并发送消息并跟踪链接以进行病毒扫描和用户活动混淆，例如Apple
Mail Privacy Protection。</p>
<p>由于自动化系统可能会影响打开和点击跟踪的准确性，因此 Mailgun
将尝试检测其中一个系统何时检索跟踪像素或单击链接。当检测到机器人打开或单击电子邮件中的链接时，Mailgun
将通过打开/单击事件中的 client-info.bot 字段进行指示。</p>
<pre class="language-MIME" data-language="MIME"><code class="language-MIME">
&#123;
    &quot;client-info&quot;: &#123;
      &quot;client-name&quot;: &quot;unknown&quot;,
      &quot;client-type&quot;: &quot;unknown&quot;,
      &quot;user-agent&quot;: &quot;Mozilla&#x2F;5.0&quot;,
      &quot;device-type&quot;: &quot;unknown&quot;,
      &quot;client-os&quot;: &quot;unknown&quot;,
      &quot;bot&quot;: &quot;apple&quot;
    &#125;,
    &quot;tags&quot;: [],
    &quot;timestamp&quot;: 1652883435.279025,
    &quot;recipient&quot;: &quot;bot@apple.com&quot;,
    &quot;geolocation&quot;: &#123;
      &quot;region&quot;: &quot;Unknown&quot;,
      &quot;country&quot;: &quot;US&quot;,
      &quot;city&quot;: &quot;Unknown&quot;
    &#125;,
    &quot;event&quot;: &quot;opened&quot;,
&#125;</code></pre>
<p>bot 字段可以具有以下可能值之一：</p>
<ol type="1">
<li>apple:表示 Apple MPP 机器人</li>
<li>gmail:表示 Gmail 机器人</li>
<li>generic:表示未知机器人（很可能是防火墙或防病毒扫描）</li>
<li>(empty):如果机器人字段为空，则表示未检测到机器人。</li>
</ol>
<h2 id="接收转发和存储消息">4. 接收、转发和存储消息</h2>
<p>Mailgun 将允许你通过路由接收电子邮件，该路由将执行以下操作：</p>
<ul>
<li>将电子邮件转发到不同的电子邮件地址</li>
<li>将电子邮件中的数据发布到 URL</li>
<li>暂时存储电子邮件以供后续通过 GET 请求检索</li>
</ul>
<p>更多信息请参考<a
target="_blank" rel="noopener" href="https://documentation.mailgun.com/docs/mailgun/user-manual/receive-forward-store/">接收、转发和存储消息</a></p>
<h2 id="测试脚本">测试脚本</h2>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> os
<span class="token keyword">import</span> random
<span class="token keyword">import</span> re
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> threading
<span class="token keyword">from</span> jinja2 <span class="token keyword">import</span> Environment
<span class="token keyword">from</span> jinja2 <span class="token keyword">import</span> FileSystemLoader
<span class="token keyword">from</span> jinja2 <span class="token keyword">import</span> select_autoescape


<span class="token keyword">def</span> <span class="token function">send_email</span><span class="token punctuation">(</span>
        to_addresses<span class="token punctuation">,</span>
        subject<span class="token punctuation">,</span>
        text<span class="token punctuation">,</span>
        tag<span class="token punctuation">,</span>
        html_template<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
        attachments<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
        tracking_opens<span class="token operator">=</span><span class="token string">"no"</span><span class="token punctuation">,</span>
        tracking_clicks<span class="token operator">=</span><span class="token string">"no"</span><span class="token punctuation">,</span>
        from_address<span class="token operator">=</span>os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"MAILGUN_FROM_ADDRESS"</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    api_key <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"MAILGUN_API_KEY"</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
    domain <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"MAILGUN_DOMAIN"</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> api_key <span class="token keyword">or</span> <span class="token keyword">not</span> domain <span class="token keyword">or</span> <span class="token keyword">not</span> from_address<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>
    url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"https://api.mailgun.net/v3/</span><span class="token interpolation"><span class="token punctuation">&#123;</span>domain<span class="token punctuation">&#125;</span></span><span class="token string">/messages"</span></span>
    auth <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"api"</span><span class="token punctuation">,</span> api_key<span class="token punctuation">)</span>

    data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token string">"from"</span><span class="token punctuation">:</span> from_address<span class="token punctuation">,</span>
        <span class="token string">"to"</span><span class="token punctuation">:</span> to_addresses<span class="token punctuation">,</span>
        <span class="token string">"subject"</span><span class="token punctuation">:</span> subject<span class="token punctuation">,</span>
        <span class="token string">"text"</span><span class="token punctuation">:</span> text<span class="token punctuation">,</span>
        <span class="token string">"o:tracking-opens"</span><span class="token punctuation">:</span> tracking_opens<span class="token punctuation">,</span>
        <span class="token string">"o:tracking-clicks"</span><span class="token punctuation">:</span> tracking_clicks<span class="token punctuation">,</span>
        <span class="token string">"o:tag"</span><span class="token punctuation">:</span> tag<span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment"># 如果有HTML内容，添加到data中</span>
    <span class="token keyword">if</span> html_template<span class="token punctuation">:</span>
        data<span class="token punctuation">[</span><span class="token string">"html"</span><span class="token punctuation">]</span> <span class="token operator">=</span> html_template

    <span class="token comment"># 处理附件</span>
    files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> attachments<span class="token punctuation">:</span>
        <span class="token comment"># 使用上下文管理器打开文件</span>
        files <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">"attachment"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>attachment<span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span>attachment<span class="token punctuation">,</span> <span class="token string">"rb"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                 <span class="token keyword">for</span> attachment <span class="token keyword">in</span> attachments<span class="token punctuation">]</span>

    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token comment"># 发送请求并检查错误</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> auth<span class="token operator">=</span>auth<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span> files<span class="token operator">=</span>files<span class="token punctuation">)</span>
        response<span class="token punctuation">.</span>raise_for_status<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 这将抛出异常，如果响应状态码表明一个错误</span>
    <span class="token keyword">except</span> requests<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>RequestException <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token comment"># 对于所有请求相关的异常</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Error sending email: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>e<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        <span class="token comment"># 无论请求成功还是抛出异常，确保所有打开的文件都被关闭</span>
        <span class="token keyword">for</span> _<span class="token punctuation">,</span> file_tuple <span class="token keyword">in</span> files<span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>file_tuple<span class="token punctuation">,</span> <span class="token builtin">tuple</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                file_tuple<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> response


<span class="token keyword">def</span> <span class="token function">get_email_id</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> response <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">None</span>
    response_dict <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token comment"># 如果存在id，返回id</span>
    <span class="token keyword">if</span> <span class="token string">"id"</span> <span class="token keyword">in</span> response_dict<span class="token punctuation">:</span>
        email_id <span class="token operator">=</span> response_dict<span class="token punctuation">[</span><span class="token string">"id"</span><span class="token punctuation">]</span>
        email_id_cleaned <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r"[&lt;>]"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> email_id<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        email_id_cleaned <span class="token operator">=</span> <span class="token boolean">None</span>
    <span class="token keyword">return</span> email_id_cleaned

<span class="token comment"># 发送注册验证码</span>
<span class="token keyword">def</span> <span class="token function">send_email_register_code</span><span class="token punctuation">(</span>to_addresses<span class="token punctuation">,</span> code<span class="token punctuation">,</span> created_at<span class="token punctuation">)</span><span class="token punctuation">:</span>
    subject <span class="token operator">=</span> <span class="token string">"注册验证码"</span>
    text <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"你的注册验证码为：\n"</span></span>
            <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">&#123;</span>code<span class="token punctuation">&#125;</span></span><span class="token string">\n"</span></span>
            <span class="token string-interpolation"><span class="token string">f"有效期为5分钟\n"</span></span>
            <span class="token string-interpolation"><span class="token string">f"请注意，如果这不是你本人的操作，请忽略并关闭此邮件。\n"</span></span><span class="token punctuation">)</span>
    tag <span class="token operator">=</span> <span class="token string">"register"</span>  <span class="token comment"># 标签</span>
    html_template <span class="token operator">=</span> render_template_direct<span class="token punctuation">(</span><span class="token string">"email/register.html"</span><span class="token punctuation">,</span> code<span class="token operator">=</span>code<span class="token punctuation">)</span>
    <span class="token comment"># 发送邮件</span>
    response <span class="token operator">=</span> send_email<span class="token punctuation">(</span>to_addresses<span class="token punctuation">,</span> subject<span class="token punctuation">,</span> text<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> html_template<span class="token punctuation">)</span>
    email_id <span class="token operator">=</span> get_email_id<span class="token punctuation">(</span>response<span class="token punctuation">)</span>

    <span class="token keyword">return</span> email_id

<span class="token comment"># jinja2模板渲染</span>
<span class="token keyword">def</span> <span class="token function">render_template_direct</span><span class="token punctuation">(</span>template_name<span class="token punctuation">,</span> <span class="token operator">**</span>context<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 设置模板环境</span>
    env <span class="token operator">=</span> Environment<span class="token punctuation">(</span>
        loader<span class="token operator">=</span>FileSystemLoader<span class="token punctuation">(</span><span class="token string">"templates"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        autoescape<span class="token operator">=</span>select_autoescape<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"html"</span><span class="token punctuation">,</span> <span class="token string">"xml"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    template <span class="token operator">=</span> env<span class="token punctuation">.</span>get_template<span class="token punctuation">(</span>template_name<span class="token punctuation">)</span>
    <span class="token keyword">return</span> template<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token operator">**</span>context<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    code <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    send_email_register_code<span class="token punctuation">(</span><span class="token string">"xx@xx"</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span></code></pre>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/avatar.ico" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/avatar.ico" title="头像" alt="头像"></a><div class="post-copyright__author_name">可爱可倾</div><div class="post-copyright__author_desc">花开有期，云舒有意</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.keaikeqing.cn/2024/03/03/Web/mailgun/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.keaikeqing.cn/2024/03/03/Web/mailgun/')">Mailgun用户手册</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/qrcode-weichat.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/qrcode-weichat.webp" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/qrcode-alipay.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/qrcode-alipay.webp" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.keaikeqing.cn/2024/03/03/Web/mailgun/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Mailgun用户手册&amp;url=https://blog.keaikeqing.cn/2024/03/03/Web/mailgun/&amp;pic=/papercover/Web/Web.webp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.keaikeqing.cn" target="_blank">可爱可倾</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="/papercover/Python/Python.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/03/03/Web/tracks/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="/papercover/Web/Web.webp" onerror="onerror=null;src='https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">网站搭建中一些记录</div></div></a></div><div class="next-post pull-right"><a href="/2024/03/03/Web/flasksite/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="/papercover/Web/Web.webp" onerror="onerror=null;src='https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Flask建站教程</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-switch"><span class="first-comment">Twikoo</span><span id="switch-btn"></span><span class="second-comment">Giscus</span></div><div class="comment-tips" id="comment-tips"><span>✅ 若未加载出评论区，请刷新页面~</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div id="giscus-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/avatar.ico" onerror="this.onerror=null;this.src='https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/author_status.webp" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38; margin:0.6rem 0; text-align:center; color:rgba(255, 255, 255, 0.8);">让每一瞬间都散发可爱的光</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">可爱可倾</h1><div class="author-info__desc">花开有期，云舒有意</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/keaikeqing" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/474502279" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">愿你的世界如花般美好，似云般自由~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#mailgun%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C"><span class="toc-number">1.</span> <span class="toc-text">Mailgun用户手册</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6"><span class="toc-number">1.1.</span> <span class="toc-text">2. 发送邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E5%9F%BA%E6%9C%AC%E6%96%87%E6%9C%AC"><span class="toc-number">1.1.1.</span> <span class="toc-text">2.1 发送基本文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E6%96%87%E6%9C%AC%E5%92%8C-html-%E7%89%88%E6%9C%AC%E5%8F%91%E9%80%81"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.2 以文本和 HTML 版本发送</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E9%99%84%E4%BB%B6"><span class="toc-number">1.1.3.</span> <span class="toc-text">2.3 发送附件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E5%86%85%E8%81%94%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.4.</span> <span class="toc-text">2.4 发送内联文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8A%9F%E8%83%BD"><span class="toc-number">1.1.5.</span> <span class="toc-text">2.5 自定义功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%85%E5%AF%B9%E7%89%B9%E5%AE%9A%E6%B6%88%E6%81%AF%E5%90%AF%E7%94%A8%E8%B7%9F%E8%B8%AA"><span class="toc-number">1.1.5.1.</span> <span class="toc-text">2.5.1 仅对特定消息启用跟踪</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E5%AE%9A%E6%97%B6%E9%97%B4%E5%8F%91%E9%80%81"><span class="toc-number">1.1.5.2.</span> <span class="toc-text">2.5.2 特定时间发送</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E8%AE%B0%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">1.1.5.3.</span> <span class="toc-text">2.5.3 标记电子邮件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E5%8F%91%E9%80%81%E4%B9%8B%E5%89%8D%E5%8F%91%E9%80%81%E7%9A%84%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">1.1.5.4.</span> <span class="toc-text">2.5.4
重新发送之前发送的电子邮件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E5%8F%91%E9%80%81"><span class="toc-number">1.1.5.5.</span> <span class="toc-text">2.5.5 批量发送</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E5%88%97%E8%A1%A8"><span class="toc-number">1.1.5.6.</span> <span class="toc-text">2.5.6 邮件列表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%BD%E8%B8%AA%E6%B6%88%E6%81%AF"><span class="toc-number">1.2.</span> <span class="toc-text">3. 追踪消息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E8%B7%9F%E8%B8%AA"><span class="toc-number">1.2.1.</span> <span class="toc-text">3.1 启用跟踪</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E8%B7%9F%E8%B8%AA"><span class="toc-number">1.2.2.</span> <span class="toc-text">3.2 事件跟踪</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%92%A9%E5%AD%90"><span class="toc-number">1.2.3.</span> <span class="toc-text">3.3 网络钩子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%E6%9C%BA%E5%99%A8%E4%BA%BA"><span class="toc-number">1.2.4.</span> <span class="toc-text">3.4 检测机器人</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E8%BD%AC%E5%8F%91%E5%92%8C%E5%AD%98%E5%82%A8%E6%B6%88%E6%81%AF"><span class="toc-number">1.3.</span> <span class="toc-text">4. 接收、转发和存储消息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC"><span class="toc-number">1.4.</span> <span class="toc-text">测试脚本</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/18/Python/logging/" title="Python系列之logging"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="/papercover/Python/Python.webp" onerror="this.onerror=null;this.src='https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp'" alt="Python系列之logging"/></a><div class="content"><a class="title" href="/2025/03/18/Python/logging/" title="Python系列之logging">Python系列之logging</a><time datetime="2025-03-18T11:53:35.000Z" title="发表于 2025-03-18 19:53:35">2025-03-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/03/Web/assets/" title="博客资源托管方案"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="/papercover/Web/Web.webp" onerror="this.onerror=null;this.src='https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp'" alt="博客资源托管方案"/></a><div class="content"><a class="title" href="/2025/03/03/Web/assets/" title="博客资源托管方案">博客资源托管方案</a><time datetime="2025-03-03T02:00:00.000Z" title="发表于 2025-03-03 10:00:00">2025-03-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/26/TechnicalNotes/CDN/" title="内容分发网络 (CDN)"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="/papercover/TechnicalNotes/CDN.webp" onerror="this.onerror=null;this.src='https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp'" alt="内容分发网络 (CDN)"/></a><div class="content"><a class="title" href="/2025/02/26/TechnicalNotes/CDN/" title="内容分发网络 (CDN)">内容分发网络 (CDN)</a><time datetime="2025-02-26T06:09:26.000Z" title="发表于 2025-02-26 14:09:26">2025-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/25/TechnicalNotes/Git/" title="git"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="/papercover/TechnicalNotes/Git.webp" onerror="this.onerror=null;this.src='https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp'" alt="git"/></a><div class="content"><a class="title" href="/2025/02/25/TechnicalNotes/Git/" title="git">git</a><time datetime="2025-02-25T06:50:50.000Z" title="发表于 2025-02-25 14:50:50">2025-02-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/20/TechnicalNotes/live2d/" title="Live2D Widget使用说明"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="/papercover/TechnicalNotes/Live2D.webp" onerror="this.onerror=null;this.src='https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp'" alt="Live2D Widget使用说明"/></a><div class="content"><a class="title" href="/2024/11/20/TechnicalNotes/live2d/" title="Live2D Widget使用说明">Live2D Widget使用说明</a><time datetime="2024-11-20T04:50:50.000Z" title="发表于 2024-11-20 12:50:50">2024-11-20</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:keaikeqing@gmail.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" href="/rss.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/avatar.ico" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/keaikeqing" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/474502279" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 - 2025 By <a class="footer-bar-link" href="/" title="可爱可倾" target="_blank">可爱可倾</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = []
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="冀ICP备2024090701号">冀ICP备2024090701号</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">9</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://blog.keaikeqing.cn/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/config_anzhiyu/404.webp&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=8265222461&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><span> 关于</span></a></div></div><span class="sidebar-menu-item-title">标签</span></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8265222461" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.3"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8265222461&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.keaikeqing.cn',
      region: 'ap-tianjin',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.keaikeqing.cn',
      region: 'ap-tianjin',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><script>(()=>{
  const getGiscusTheme = theme => {
    return theme === 'dark' ? 'dark' : 'preferred_color_scheme'
  }

  const loadGiscus = () => {
    const config = Object.assign({
      src: 'https://giscus.app/client.js',
      'data-repo': 'keaikeqing/blogdis',
      'data-repo-id': 'R_kgDONKpBew',
      'data-category-id': 'DIC_kwDONKpBe84Cj_Px',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },{"data-lang":"zh-CN","data-mapping":"pathname","data-category":"Announcements","data-input-position":"top"})

    const ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').appendChild(ele)
  }

  const changeGiscusTheme = theme => {
    const sendMessage = message => {
      const iframe = document.querySelector('iframe.giscus-frame')
      if (!iframe) return
      iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app')
    }

    sendMessage({
      setConfig: {
        theme: getGiscusTheme(theme)
      }
    });
  }

  anzhiyu.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if ('Twikoo' === 'Giscus' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.keaikeqing.cn',
        region: 'ap-tianjin',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.44/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "visitor@keaikeqing.cn";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://cdn.cbd.int/qrcodejs@1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script defer src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/js/mathjax_config.js"></script><script type="text/javascript" id="MathJax-script" defer src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/js/lib/MathJax/tex-chtml.js"></script><script defer src="https://gcore.jsdelivr.net/npm/@keaikeqing/blog-static@latest/assets/live2d-widget/autoload.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="#waifu"]):not([href="#waifu-toggle"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>